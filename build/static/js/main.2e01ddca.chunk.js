(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{42:function(n,e,t){},44:function(n,e,t){"use strict";t.r(e);var c=t(3),r=t(18),o=t.n(r),u=t(19),a=t(8),i=t(1),s=t(6),l=t(4),b=t.n(l),f="/api/persons",j=function(){return b.a.get(f).then((function(n){return n.data}))},d=function(n){return b.a.post(f,n).then((function(n){return n.data}))},m=function(n,e){return b.a.put("".concat(f,"/").concat(n),e).then((function(n){return n.data}))},O=function(n){return b.a.delete("".concat(f,"/").concat(n)).then((function(n){return n.data}))},h=(t(42),t(0)),p=function(n){var e=n.onChangeSearch,t=n.filterInputValue;return Object(h.jsxs)("div",{children:["filter shown with"," ",Object(h.jsx)("input",{onChange:e,value:t})]})},v=function(n){var e=n.formSubmitHandler,t=n.inputHandler,c=n.newContact;return Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsxs)("div",{children:["name:"," ",Object(h.jsx)("input",{name:"name",onChange:t,value:c.name})]}),Object(h.jsxs)("div",{children:["number:"," ",Object(h.jsx)("input",{name:"number",onChange:t,value:c.number})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},x=function(n){var e=n.name,t=n.number,c=n.id,r=n.deleteClickHandler;return Object(h.jsxs)("div",{children:[e," ",t,Object(h.jsx)("button",{onClick:r,children:"delete"})]},c)},w=function(n){var e=n.persons,t=n.filter,c=n.setPersons,r=e.filter((function(n){return n.name.toLowerCase().startsWith(t.toLowerCase())}));return Object(h.jsx)("div",{children:r.map((function(n,t){return Object(h.jsx)(x,{name:n.name,number:n.number,id:n.id,deleteClickHandler:function(){return function(n){var t=e.filter((function(e){return e.id===n}));window.confirm("Are you sure you want to delete ".concat(t.name))&&O(n).then((function(t){c(e.filter((function(e){return e.id!==n})))})).catch((function(n){console.log("error here")}))}(n.id)}})}))})},y=function(n){var e=n.notification;return null===e.content?null:Object(h.jsx)("div",{className:1===e.type?"notificationSuccess":"notificationError",children:e.content})},g=function(){var n=Object(c.useState)([]),e=Object(s.a)(n,2),t=e[0],r=e[1],o=Object(c.useState)({name:"",number:""}),l=Object(s.a)(o,2),b=l[0],f=l[1],O=Object(c.useState)(""),x=Object(s.a)(O,2),g=x[0],C=x[1],S=Object(c.useState)({content:null,type:null}),k=Object(s.a)(S,2),H=k[0],I=k[1];Object(c.useEffect)((function(){j().then((function(n){r(n)})).catch((function(n){console.log("Something went wrong")}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(y,{notification:H}),Object(h.jsx)(p,{onChangeSearch:function(n){C(n.target.value)},filterInputValue:g}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(v,{formSubmitHandler:function(n){n.preventDefault();var e=t.find((function(n){return n.name===b.name}));e?window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&(e.number=b.number,m(e.id,e).then((function(n){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"".concat(e.name," updated successfully!"),type:1})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3),f({name:"",number:""})})).catch((function(n){r(t.filter((function(n){return n.id!==e}))),I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"Information of ".concat(e.name," has already been removed from the server."),type:0})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3)}))):d(b).then((function(n){console.log("created person",n),I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"".concat(b.name," added successfully!"),type:1})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3),r((function(e){return[].concat(Object(u.a)(e),[n])})),f({name:"",number:""})})).catch((function(n){I((function(e){return Object(i.a)(Object(i.a)({},e),{},{content:"".concat(n.response.data.error),type:2})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3),console.log("error",n.response.data.error)}))},inputHandler:function(n){f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},n.target.name,n.target.value))}))},newContact:b}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(w,{persons:t,setPersons:r,filter:g})]})},C=document.getElementById("root");o.a.render(Object(h.jsx)(c.StrictMode,{children:Object(h.jsx)(g,{})}),C)}},[[44,1,2]]]);
//# sourceMappingURL=main.2e01ddca.chunk.js.map